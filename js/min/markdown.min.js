var Markdown;Markdown="object"===typeof exports&&"function"===typeof require?exports:{};
(function(){function y(m){return m}function E(m){return!1}function F(){}function r(){}F.prototype={chain:function(m,r){var u=this[m];if(!u)throw Error("unknown hook "+m);this[m]=u===y?r:function(m){return r(u(m))}},set:function(m,r){if(!this[m])throw Error("unknown hook "+m);this[m]=r},addNoop:function(m){this[m]=y},addFalse:function(m){this[m]=E}};Markdown.HookCollection=F;r.prototype={set:function(m,r){this["s_"+m]=r},get:function(m){return this["s_"+m]}};Markdown.Converter=function(){function m(a){return a=
a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(a,H,b,c,d,e){H=H.toLowerCase();B.set(H,n(b));if(d)return c;e&&z.set(H,e.replace(/"/g,"&quot;"));return""})}function y(a){a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,u);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,
u);a=a.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,u);a=a.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,u);return a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,u)}function u(a,b){var c;c=b.replace(/^\n+/,"");c=c.replace(/\n+$/g,"");return c="\n\n~K"+(I.push(c)-1)+"K\n\n"}function G(a,b){a=w(a);a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,"<hr />\n");a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,"<hr />\n");a=
a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,"<hr />\n");a=v(a);a=t(a);a=c(a);a=y(a);return a=e(a,b)}function h(a){a=d(a);a=A(a);a=a.replace(/\\(\\)/g,M);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,M);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,q);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,q);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,C);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
C);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,C);a=f(a);a=a.replace(/~P/g,"://");a=n(a);a=a.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4");a=a.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4");return a=a.replace(/  +\n/g," <br>\n")}function A(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=l(b,"!"==a.charAt(1)?
"\\`*_/":"\\`*_")})}function C(a,b,c,d,e,x,k,f){void 0==f&&(f="");a=c.replace(/:\/\//g,"~P");d=d.toLowerCase();if(""==e)if(""==d&&(d=a.toLowerCase().replace(/ ?\n/g," ")),void 0!=B.get(d))e=B.get(d),void 0!=z.get(d)&&(f=z.get(d));else if(-1<b.search(/\(\s*\)$/m))e="";else return b;e=s(e);e=l(e,"*_");b='<a href="'+e+'"';""!=f&&(f=g(f),f=l(f,"*_"),b+=' title="'+f+'"');return b+(">"+a+"</a>")}function g(a){return a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function q(a,b,c,d,e,
x,f,k){a=c;d=d.toLowerCase();k||(k="");if(""==e)if(""==d&&(d=a.toLowerCase().replace(/ ?\n/g," ")),void 0!=B.get(d))e=B.get(d),void 0!=z.get(d)&&(k=z.get(d));else return b;a=l(g(a),"*_[]()");e=l(e,"*_");b='<img src="'+e+'" alt="'+a+'"';k=g(k);k=l(k,"*_");return b=b+(' title="'+k+'"')+" />"}function w(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return"<h1>"+h(b)+"</h1>\n\n"});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return"<h2>"+h(b)+"</h2>\n\n"});return a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,
function(a,b,d){a=b.length;return"<h"+a+">"+h(d)+"</h"+a+">\n\n"})}function v(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;J?a=a.replace(b,function(a,b,d){a=-1<d.search(/[*+-]/g)?"ul":"ol";b=K(b,a);b=b.replace(/\s+$/,"");return"<"+a+">"+b+"</"+a+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,d,c){a=-1<c.search(/[*+-]/g)?"ul":"ol";d=K(d,a);
return b+"<"+a+">\n"+d+"</"+a+">\n"}));return a=a.replace(/~0/,"")}function K(a,b){J++;a=a.replace(/\n{2,}$/,"\n");var d=N[b],c=!1;a=(a+"~0").replace(RegExp("(^[ \\t]*)("+d+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+d+")[ \\t]+))","gm"),function(a,b,d,e){a=e;(b=/\n\n$/.test(a))||-1<a.search(/\n{2,}/)||c?a=G(p(a),!0):(a=v(p(a)),a=a.replace(/\n$/,""),a=h(a));c=b;return"<li>"+a+"</li>\n"});a=a.replace(/~0/g,"");J--;return a}function t(a){a=(a+"~0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,
function(a,d,c){a=b(p(d));a=k(a);a=a.replace(/^\n+/g,"");a=a.replace(/\n+$/g,"");a="<pre><code>"+a+"\n</code></pre>";return"\n\n"+a+"\n\n"+c});return a=a.replace(/~0/,"")}function a(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(I.push(a)-1)+"K\n\n"}function d(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,d,c,e,H){a=e.replace(/^([ \t]*)/g,"");a=a.replace(/[ \t]*$/g,"");a=b(a);a=a.replace(/:\/\//g,"~P");return d+"<code>"+a+"</code>"})}function b(a){a=a.replace(/&/g,"&amp;");
a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=l(a,"*_{}[]\\",!1)}function c(b){return b=b.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(b,d){var c;c=d.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");c=G(c);c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return a("<blockquote>\n"+c+"\n</blockquote>")})}function e(a,b){a=a.replace(/^\n+/g,"");
a=a.replace(/\n+$/g,"");for(var c=a.split(/\n{2,}/g),d=[],e=/~K(\d+)K/,x=c.length,k=0;k<x;k++){var f=c[k];e.test(f)?d.push(f):/\S/.test(f)&&(f=h(f),f=f.replace(/^([ \t]*)/g,"<p>"),f+="</p>",d.push(f))}if(!b)for(x=d.length,k=0;k<x;k++)for(var z=!0;z;)z=!1,d[k]=d[k].replace(/~K(\d+)K/g,function(a,b){z=!0;return I[b]});return d.join("\n\n")}function n(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")}function f(a){a=a.replace(/(^|\s)(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\]])($|\W)/gi,
"$1<$2$3>$4");return a=a.replace(/<((https?|ftp):[^'">\s]+)>/gi,function(a,b){return'<a href="'+b+'">'+x.plainLinkText(b)+"</a>"})}function D(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})}function p(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")}function k(a){if(!/\t/.test(a))return a;var b=["    ","   ","  "," "],c=0,d;return a.replace(/[\n\t]/g,function(a,e){if("\n"===a)return c=e+1,a;d=(e-c)%4;c=e+1;return b[d]})}function s(a){if(!a)return"";
var b=a.length;return a.replace(E,function(c,d){return"~D"==c?"%24":":"!=c||d!=b-1&&!/[0-9\/]/.test(a.charAt(d+1))?"%"+c.charCodeAt(0).toString(16):":"})}function l(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(RegExp(b,"g"),M)}function M(a,b){return"~E"+b.charCodeAt(0)+"E"}var x=this.hooks=new F;x.addNoop("plainLinkText");x.addNoop("preConversion");x.addNoop("postConversion");var B,z,I,J;this.makeHtml=function(a){if(B)throw Error("Recursive call to converter.makeHtml");
B=new r;z=new r;I=[];J=0;a=x.preConversion(a);a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=k("\n\n"+a+"\n\n");a=a.replace(/^[ \t]+$/mg,"");a=y(a);a=m(a);a=G(a);a=D(a);a=a.replace(/~D/g,"$$");a=a.replace(/~T/g,"~");a=x.postConversion(a);I=z=B=null;return a};var N={ol:"\\d+[.]",ul:"[*+-]"},E=/(?:["'*()[\]:]|~D)/g}})();(function(){function y(){}function E(a){this.buttonBar=g.getElementById("wmd-button-bar"+a);this.preview=g.getElementById("wmd-preview"+a);this.input=g.getElementById("wmd-input"+a)}function F(a,d){var b=this,c=[],e=0,n="none",f,g,p,k=function(a,b){n!=a&&(n=a,b||l());v.isIE&&"moving"==n?p=null:g=setTimeout(s,1)},s=function(a){p=new r(d,a);g=void 0};this.setCommandMode=function(){n="command";l();g=setTimeout(s,0)};this.canUndo=function(){return 1<e};this.canRedo=function(){return c[e+1]?!0:!1};this.undo=
function(){b.canUndo()&&(f?(f.restore(),f=null):(c[e]=new r(d),c[--e].restore(),a&&a()));n="none";d.input.focus();s()};this.redo=function(){b.canRedo()&&(c[++e].restore(),a&&a());n="none";d.input.focus();s()};var l=function(){var b=p||new r(d);if(!b)return!1;"moving"==n?f||(f=b):(f&&(c[e-1].text!=f.text&&(c[e++]=f),f=null),c[e++]=b,c[e+1]=null,a&&a())},m=function(a){var c=!1;if(a.ctrlKey||a.metaKey)switch(String.fromCharCode(a.charCode||a.keyCode)){case "y":b.redo();c=!0;break;case "z":a.shiftKey?
b.redo():b.undo(),c=!0}c&&(a.preventDefault&&a.preventDefault(),window.event&&(window.event.returnValue=!1))},x=function(a){a.ctrlKey||a.metaKey||(a=a.keyCode,33<=a&&40>=a||63232<=a&&63235>=a?k("moving"):8==a||46==a||127==a?k("deleting"):13==a?k("newlines"):27==a?k("escape"):(16>a||20<a)&&91!=a&&k("typing"))};(function(){h.addEvent(d.input,"keypress",function(a){!a.ctrlKey&&!a.metaKey||89!=a.keyCode&&90!=a.keyCode||a.preventDefault()});var a=function(){(v.isIE||p&&p.text!=d.input.value)&&void 0==
g&&(n="paste",l(),s())};h.addEvent(d.input,"keydown",m);h.addEvent(d.input,"keydown",x);h.addEvent(d.input,"mousedown",function(){k("moving")});d.input.onpaste=a;d.input.ondrop=a})();s(!0);l()}function r(a,d){var b=this,c=a.input;this.init=function(){h.isVisible(c)&&(d||!g.activeElement||g.activeElement===c)&&(this.setInputAreaSelectionStartEnd(),this.scrollTop=c.scrollTop,!this.text&&c.selectionStart||0===c.selectionStart)&&(this.text=c.value)};this.setInputAreaSelection=function(){if(h.isVisible(c))if(void 0!==
c.selectionStart&&!v.isOpera)c.focus(),c.selectionStart=b.start,c.selectionEnd=b.end,c.scrollTop=b.scrollTop;else if(g.selection&&(!g.activeElement||g.activeElement===c)){c.focus();var a=c.createTextRange();a.moveStart("character",-c.value.length);a.moveEnd("character",-c.value.length);a.moveEnd("character",b.end);a.moveStart("character",b.start);a.select()}};this.setInputAreaSelectionStartEnd=function(){if(!a.ieCachedRange&&(c.selectionStart||0===c.selectionStart))b.start=c.selectionStart,b.end=
c.selectionEnd;else if(g.selection){b.text=h.fixEolChars(c.value);var d=a.ieCachedRange||g.selection.createRange(),n=h.fixEolChars(d.text),f="\u0007"+n+"\u0007";d.text=f;var D=h.fixEolChars(c.value);d.moveStart("character",-f.length);d.text=n;b.start=D.indexOf("\u0007");b.end=D.lastIndexOf("\u0007")-1;if(f=b.text.length-h.fixEolChars(c.value).length){for(d.moveStart("character",-n.length);f--;)n+="\n",b.end+=1;d.text=n}a.ieCachedRange&&(b.scrollTop=a.ieCachedScrollTop);a.ieCachedRange=null;this.setInputAreaSelection()}};
this.restore=function(){void 0!=b.text&&b.text!=c.value&&(c.value=b.text);this.setInputAreaSelection();c.scrollTop=b.scrollTop};this.getChunks=function(){var a=new y;a.before=h.fixEolChars(b.text.substring(0,b.start));a.startTag="";a.selection=h.fixEolChars(b.text.substring(b.start,b.end));a.endTag="";a.after=h.fixEolChars(b.text.substring(b.end));a.scrollTop=b.scrollTop;return a};this.setChunks=function(a){a.before+=a.startTag;a.after=a.endTag+a.after;this.start=a.before.length;this.end=a.before.length+
a.selection.length;this.text=a.before+a.selection+a.after;this.scrollTop=a.scrollTop};this.init()}function m(a,d,b){var c,e,n,f=function(){var a=0;window.innerHeight?a=window.pageYOffset:g.documentElement&&g.documentElement.scrollTop?a=g.documentElement.scrollTop:g.body&&(a=g.body.scrollTop);return a},D=function(){if(d.preview){var b=d.input.value;if(!b||b!=n){n=b;var c=(new Date).getTime(),b=a.makeHtml(b);e=(new Date).getTime()-c;B(b)}}},p=function(){c&&(clearTimeout(c),c=void 0);var a=0,a=e;3E3<
a&&(a=3E3);c=setTimeout(D,a)};this.refresh=function(a){a?(n="",D()):p()};this.processingTime=function(){return e};var k=!0,s=function(a){var b=d.preview,c=b.parentNode,e=b.nextSibling;c.removeChild(b);b.innerHTML=a;e?c.insertBefore(b,e):c.appendChild(b)},l=function(a){d.preview.innerHTML=a},m,x=function(a){if(m)return m(a);try{l(a),m=l}catch(b){m=s,m(a)}},B=function(a){var c=A.getTop(d.input)-f();d.preview&&(x(a),b());d.preview&&(d.preview.scrollTop=(d.preview.scrollHeight-d.preview.clientHeight)*
(d.preview.scrollHeight<=d.preview.clientHeight?1:d.preview.scrollTop/(d.preview.scrollHeight-d.preview.clientHeight)));if(k)k=!1;else{var e=A.getTop(d.input)-f();v.isIE?setTimeout(function(){window.scrollBy(0,e-c)},0):window.scrollBy(0,e-c)}};(function(a,b){h.addEvent(a,"input",b);a.onpaste=b;a.ondrop=b;h.addEvent(a,"keypress",b);h.addEvent(a,"keydown",b)})(d.input,p);D();d.preview&&(d.preview.scrollTop=0)}function L(a,d,b,c,e,n){function f(a){s.focus();if(a.textOp){b&&b.setCommandMode();var e=new r(d);
if(!e)return;var k=e.getChunks(),f=function(){s.focus();k&&e.setChunks(k);e.restore();c.refresh()};a.textOp(k,f)||f()}a.execute&&a.execute(b)}function m(a,b){var c=a.getElementsByTagName("span")[0];b?(c.style.backgroundPosition=a.XShift+" 0px",a.onmouseover=function(){c.style.backgroundPosition=this.XShift+" -40px"},a.onmouseout=function(){c.style.backgroundPosition=this.XShift+" 0px"},v.isIE&&(a.onmousedown=function(){g.activeElement&&g.activeElement!==d.input||(d.ieCachedRange=document.selection.createRange(),
d.ieCachedScrollTop=d.input.scrollTop)}),a.isHelp||(a.onclick=function(){if(this.onmouseout)this.onmouseout();f(this);return!1})):(c.style.backgroundPosition=a.XShift+" -20px",a.onmouseover=a.onmouseout=a.onclick=function(){})}function p(a){"string"===typeof a&&(a=e[a]);return function(){a.apply(e,arguments)}}function k(){b&&(m(l.undo,b.canUndo()),m(l.redo,b.canRedo()))}var s=d.input,l={};(function(){var b=d.buttonBar,c=document.createElement("ul");c.id="wmd-button-row"+a;c.className="wmd-button-row";
var c=b.appendChild(c),e=0,b=function(b,d,f,k){var l=document.createElement("li");l.className="wmd-button";l.style.left=e+"px";e+=25;var g=document.createElement("span");l.id=b+a;l.appendChild(g);l.title=d;l.XShift=f;k&&(l.textOp=k);m(l,!0);c.appendChild(l);return l},f=function(b){var d=document.createElement("li");d.className="wmd-spacer wmd-spacer"+b;d.id="wmd-spacer"+b+a;c.appendChild(d);e+=25};l.bold=b("wmd-bold-button","Strong <strong> Ctrl+B","0px",p("doBold"));l.italic=b("wmd-italic-button",
"Emphasis <em> Ctrl+I","-20px",p("doItalic"));f(1);l.link=b("wmd-link-button","Hyperlink <a> Ctrl+L","-40px",p(function(a,b){return this.doLinkOrImage(a,b,!1)}));l.quote=b("wmd-quote-button","Blockquote <blockquote> Ctrl+Q","-60px",p("doBlockquote"));l.code=b("wmd-code-button","Code Sample <pre><code> Ctrl+K","-80px",p("doCode"));l.image=b("wmd-image-button","Image <img> Ctrl+G","-100px",p(function(a,b){return this.doLinkOrImage(a,b,!0)}));f(2);l.olist=b("wmd-olist-button","Numbered List <ol> Ctrl+O",
"-120px",p(function(a,b){this.doList(a,b,!0)}));l.ulist=b("wmd-ulist-button","Bulleted List <ul> Ctrl+U","-140px",p(function(a,b){this.doList(a,b,!1)}));l.heading=b("wmd-heading-button","Heading <h1>/<h2> Ctrl+H","-160px",p("doHeading"));l.hr=b("wmd-hr-button","Horizontal Rule <hr> Ctrl+R","-180px",p("doHorizontalRule"));f(3);l.undo=b("wmd-undo-button","Undo - Ctrl+Z","-200px",null);l.undo.execute=function(a){a&&a.undo()};f=/win/.test(w.platform.toLowerCase())?"Redo - Ctrl+Y":"Redo - Ctrl+Shift+Z";
l.redo=b("wmd-redo-button",f,"-220px",null);l.redo.execute=function(a){a&&a.redo()};n&&(b=document.createElement("li"),f=document.createElement("span"),b.appendChild(f),b.className="wmd-button wmd-help-button",b.id="wmd-help-button"+a,b.XShift="-240px",b.isHelp=!0,b.style.right="0px",b.title=n.title||K,b.onclick=n.handler,m(b,!0),c.appendChild(b),l.help=b);k()})();var q="keydown";v.isOpera&&(q="keypress");h.addEvent(s,q,function(a){if((a.ctrlKey||a.metaKey)&&!a.altKey&&!a.shiftKey){switch(String.fromCharCode(a.charCode||
a.keyCode).toLowerCase()){case "b":f(l.bold);break;case "i":f(l.italic);break;case "l":f(l.link);break;case "q":f(l.quote);break;case "k":f(l.code);break;case "g":f(l.image);break;case "o":f(l.olist);break;case "u":f(l.ulist);break;case "h":f(l.heading);break;case "r":f(l.hr);break;case "y":f(l.redo);break;case "z":a.shiftKey?f(l.redo):f(l.undo);break;default:return}a.preventDefault&&a.preventDefault();window.event&&(window.event.returnValue=!1)}});h.addEvent(s,"keyup",function(a){!a.shiftKey||(a.ctrlKey||
a.metaKey)||13!==(a.charCode||a.keyCode)||(a={},a.textOp=p("doAutoindent"),f(a))});v.isIE&&h.addEvent(s,"keydown",function(a){if(27===a.keyCode)return!1});this.setUndoRedoButtonStates=k}function u(a){this.hooks=a}function G(a){return a.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(a,b,c){b=b.replace(/\?.*$/,function(a){return a.replace(/\+/g," ")});b=decodeURIComponent(b);b=encodeURI(b).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29");b=b.replace(/\?.*$/,function(a){return a.replace(/\+/g,
"%2b")});c&&(c=c.trim?c.trim():c.replace(/^\s*/,"").replace(/\s*$/,""),c=$.trim(c).replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;"));return c?b+' "'+c+'"':b})}var h={},A={},C={},g=window.document,q=window.RegExp,w=window.navigator,v={isIE:/msie/.test(w.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(w.userAgent.toLowerCase())||/msie 5/.test(w.userAgent.toLowerCase()),isOpera:/opera/.test(w.userAgent.toLowerCase())},K="Markdown Editing Help";
Markdown.Editor=function(a,d,b){d=d||"";var c=this.hooks=new Markdown.HookCollection;c.addNoop("onPreviewRefresh");c.addNoop("postBlockquoteCreation");c.addFalse("insertImageDialog");this.getConverter=function(){return a};var e=this,n;this.run=function(){if(!n){n=new E(d);var f=new u(c),h=new m(a,n,function(){c.onPreviewRefresh()}),p,k;/\?noundo/.test(g.location.href)||(p=new F(function(){h.refresh();k&&k.setUndoRedoButtonStates()},n),this.textOperation=function(a){p.setCommandMode();a();e.refreshPreview()});
k=new L(d,n,p,h,f,b);k.setUndoRedoButtonStates();(e.refreshPreview=function(){h.refresh(!0)})()}}};y.prototype.findTags=function(a,d){var b=this,c;a&&(c=h.extendRegExp(a,"","$"),this.before=this.before.replace(c,function(a){b.startTag+=a;return""}),c=h.extendRegExp(a,"^",""),this.selection=this.selection.replace(c,function(a){b.startTag+=a;return""}));d&&(c=h.extendRegExp(d,"","$"),this.selection=this.selection.replace(c,function(a){b.endTag=a+b.endTag;return""}),c=h.extendRegExp(d,"^",""),this.after=
this.after.replace(c,function(a){b.endTag=a+b.endTag;return""}))};y.prototype.trimWhitespace=function(a){var d,b=this;a?a=d="":(a=function(a){b.before+=a;return""},d=function(a){b.after=a+b.after;return""});this.selection=this.selection.replace(/^(\s*)/,a).replace(/(\s*)$/,d)};y.prototype.skipLines=function(a,d,b){void 0===a&&(a=1);void 0===d&&(d=1);a++;d++;var c,e;navigator.userAgent.match(/Chrome/)&&"X".match(/()./);this.selection=this.selection.replace(/(^\n*)/,"");this.startTag+=q.$1;this.selection=
this.selection.replace(/(\n*$)/,"");this.endTag+=q.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before+=q.$1;this.endTag=this.endTag.replace(/(\n*$)/,"");this.after+=q.$1;if(this.before){for(c=e="";a--;)c+="\\n?",e+="\n";b&&(c="\\n*");this.before=this.before.replace(new q(c+"$",""),e)}if(this.after){for(c=e="";d--;)c+="\\n?",e+="\n";b&&(c="\\n*");this.after=this.after.replace(new q(c,""),e)}};h.isVisible=function(a){if(window.getComputedStyle)return"none"!==window.getComputedStyle(a,null).getPropertyValue("display");
if(a.currentStyle)return"none"!==a.currentStyle.display};h.addEvent=function(a,d,b){a.attachEvent?a.attachEvent("on"+d,b):a.addEventListener(d,b,!1)};h.removeEvent=function(a,d,b){a.detachEvent?a.detachEvent("on"+d,b):a.removeEventListener(d,b,!1)};h.fixEolChars=function(a){a=a.replace(/\r\n/g,"\n");return a=a.replace(/\r/g,"\n")};h.extendRegExp=function(a,d,b){if(null===d||void 0===d)d="";if(null===b||void 0===b)b="";a=a.toString();var c;a=a.replace(/\/([gim]*)$/,function(a,b){c=b;return""});a=a.replace(/(^\/|\/$)/g,
"");return new q(d+a+b,c)};A.getTop=function(a,d){var b=a.offsetTop;if(!d)for(;a=a.offsetParent;)b+=a.offsetTop;return b};A.getHeight=function(a){return a.offsetHeight||a.scrollHeight};A.getWidth=function(a){return a.offsetWidth||a.scrollWidth};A.getPageSize=function(){var a,d,b,c;self.innerHeight&&self.scrollMaxY?(a=g.body.scrollWidth,d=self.innerHeight+self.scrollMaxY):g.body.scrollHeight>g.body.offsetHeight?(a=g.body.scrollWidth,d=g.body.scrollHeight):(a=g.body.offsetWidth,d=g.body.offsetHeight);
self.innerHeight?(b=self.innerWidth,c=self.innerHeight):g.documentElement&&g.documentElement.clientHeight?(b=g.documentElement.clientWidth,c=g.documentElement.clientHeight):g.body&&(b=g.body.clientWidth,c=g.body.clientHeight);a=Math.max(a,b);d=Math.max(d,c);return[a,d,b,c]};C.createBackground=function(){var a=g.createElement("div"),d=a.style;a.className="wmd-prompt-background";d.position="absolute";d.top="0";d.zIndex="1000";v.isIE?d.filter="alpha(opacity=50)":d.opacity="0.5";var b=A.getPageSize();
d.height=b[1]+"px";v.isIE?(d.left=g.documentElement.scrollLeft,d.width=g.documentElement.clientWidth):(d.left="0",d.width="100%");g.body.appendChild(a);return a};C.prompt=function(a,d,b){var c,e;void 0===d&&(d="");var n=function(a){27===(a.charCode||a.keyCode)&&f(!0)},f=function(a){h.removeEvent(g.body,"keydown",n);var d=e.value;a?d=null:(d=d.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(d)||(d="http://"+d));c.parentNode.removeChild(c);b(d);return!1},m=function(){c=g.createElement("div");
c.className="wmd-prompt-dialog";c.style.padding="10px;";c.style.position="fixed";c.style.width="400px";c.style.zIndex="1001";var b=g.createElement("div");b.innerHTML=a;b.style.padding="5px";c.appendChild(b);var b=g.createElement("form"),k=b.style;b.onsubmit=function(){return f(!1)};k.padding="0";k.margin="0";k.cssFloat="left";k.width="100%";k.textAlign="center";k.position="relative";c.appendChild(b);e=g.createElement("input");e.type="text";e.value=d;k=e.style;k.display="block";k.width="80%";k.marginLeft=
k.marginRight="auto";b.appendChild(e);var s=g.createElement("input");s.type="button";s.onclick=function(){return f(!1)};s.value="OK";k=s.style;k.margin="10px";k.display="inline";k.width="7em";var l=g.createElement("input");l.type="button";l.onclick=function(){return f(!0)};l.value="Cancel";k=l.style;k.margin="10px";k.display="inline";k.width="7em";b.appendChild(s);b.appendChild(l);h.addEvent(g.body,"keydown",n);c.style.top="50%";c.style.left="50%";c.style.display="block";v.isIE_5or6&&(c.style.position=
"absolute",c.style.top=g.documentElement.scrollTop+200+"px",c.style.left="50%");g.body.appendChild(c);c.style.marginTop=-(A.getHeight(c)/2)+"px";c.style.marginLeft=-(A.getWidth(c)/2)+"px"};setTimeout(function(){m();var a=d.length;if(void 0!==e.selectionStart)e.selectionStart=0,e.selectionEnd=a;else if(e.createTextRange){var b=e.createTextRange();b.collapse(!1);b.moveStart("character",-a);b.moveEnd("character",a);b.select()}e.focus()},0)};var t=u.prototype;t.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";
t.unwrap=function(a){var d=new q("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");a.selection=a.selection.replace(d,"$1 $2")};t.wrap=function(a,d){this.unwrap(a);var b=new q("(.{1,"+d+"})( +|$\\n?)","gm"),c=this;a.selection=a.selection.replace(b,function(a,b){return(new q("^"+c.prefixes,"")).test(a)?a:b+"\n"});a.selection=a.selection.replace(/\s+$/,"")};t.doBold=function(a,d){return this.doBorI(a,d,2,"strong text")};t.doItalic=function(a,d){return this.doBorI(a,d,1,"emphasized text")};t.doBorI=function(a,
d,b,c){a.trimWhitespace();a.selection=a.selection.replace(/\n{2,}/g,"\n");var e=/(\**$)/.exec(a.before)[0];d=/(^\**)/.exec(a.after)[0];e=Math.min(e.length,d.length);e>=b&&(2!=e||1!=b)?(a.before=a.before.replace(q("[*]{"+b+"}$",""),""),a.after=a.after.replace(q("^[*]{"+b+"}",""),"")):!a.selection&&d?(a.after=a.after.replace(/^([*_]*)/,""),a.before=a.before.replace(/(\s?)$/,""),a.before=a.before+d+q.$1):(a.selection||d||(a.selection=c),b=1>=b?"*":"**",a.before+=b,a.after=b+a.after)};t.stripLinkDefs=
function(a,d){return a=a.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(a,c,e,g,f){d[c]=a.replace(/\s*$/,"");return g?(d[c]=a.replace(/["(](.+?)[")]$/,""),g+f):""})};t.addLinkDef=function(a,d){var b=0,c={};a.before=this.stripLinkDefs(a.before,c);a.selection=this.stripLinkDefs(a.selection,c);a.after=this.stripLinkDefs(a.after,c);var e="",g=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,f=function(a){b++;a=a.replace(/^[ ]{0,3}\[(\d+)\]:/,
"  ["+b+"]:");e+="\n"+a},h=function(a,d,e,m,p,q){e=e.replace(g,h);return c[p]?(f(c[p]),d+e+m+b+q):a};a.before=a.before.replace(g,h);d?f(d):a.selection=a.selection.replace(g,h);var m=b;a.after=a.after.replace(g,h);a.after&&(a.after=a.after.replace(/\n*$/,""));a.after||(a.selection=a.selection.replace(/\n*$/,""));a.after+="\n\n"+e;return m};t.doLinkOrImage=function(a,d,b){a.trimWhitespace();a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var c;if(1<a.endTag.length&&0<a.startTag.length)a.startTag=
a.startTag.replace(/!?\[/,""),a.endTag="",this.addLinkDef(a,null);else if(a.selection=a.startTag+a.selection+a.endTag,a.startTag=a.endTag="",/\n\n/.test(a.selection))this.addLinkDef(a,null);else{var e=this,g=function(f){c.parentNode.removeChild(c);null!==f&&(a.selection=(" "+a.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),f=" [999]: "+G(f),f=e.addLinkDef(a,f),a.startTag=b?"![":"[",a.endTag="]["+f+"]",a.selection||(a.selection=b?"enter image description here":"enter link description here"));
d()};c=C.createBackground();b?this.hooks.insertImageDialog(g)||C.prompt('<p><b>\u63d2\u5165\u56fe\u7247</b></p><p>http://example.com/images/diagram.jpg "optional title"</p>',"http://",g):C.prompt('<p><b>\u63d2\u5165\u94fe\u63a5</b></p><p>http://example.com/ "optional title"</p>',"http://",g);return!0}};t.doAutoindent=function(a,d){var b=!1;a.before=a.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ \t]+\n$/,
"\n\n");a.selection||/^[ \t]*(?:\n|$)/.test(a.after)||(a.after=a.after.replace(/^[^\n]*/,function(b){a.selection=b;return""}),b=!0);/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(a.before)&&this.doList&&this.doList(a);/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(a.before)&&this.doBlockquote&&this.doBlockquote(a);/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&this.doCode&&this.doCode(a);b&&(a.after=a.selection+a.after,a.selection="")};t.doBlockquote=function(a,d){a.selection=a.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,
function(b,c,d,e){a.before+=c;a.after=e+a.after;return d});a.before=a.before.replace(/(>[ \t]*)$/,function(b,c){a.selection=c+a.selection;return""});a.selection=a.selection.replace(/^(\s|>)+$/,"");a.selection=a.selection||"Blockquote";var b="",c="",e;if(a.before){for(var g=a.before.replace(/\n$/,"").split("\n"),f=!1,h=0;h<g.length;h++){var m=!1;e=g[h];f=f&&0<e.length;/^>/.test(e)?(m=!0,!f&&1<e.length&&(f=!0)):m=/^[ \t]*$/.test(e)?!0:f;m?b+=e+"\n":(c+=b+e,b="\n")}/(^|\n)>/.test(b)||(c+=b,b="")}a.startTag=
b;a.before=c;a.after&&(a.after=a.after.replace(/^\n?/,"\n"));a.after=a.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(b){a.endTag=b;return""});b=function(b){var c=b?"> ":"";a.startTag&&(a.startTag=a.startTag.replace(/\n((>|\s)*)\n$/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"}));a.endTag&&(a.endTag=a.endTag.replace(/^\n((>|\s)*)\n/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"}))};/^(?![ ]{0,3}>)/m.test(a.selection)?(this.wrap(a,70),
a.selection=a.selection.replace(/^/gm,"> "),b(!0),a.skipLines()):(a.selection=a.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(a),b(!1),!/^(\n|^)[ ]{0,3}>/.test(a.selection)&&a.startTag&&(a.startTag=a.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(a.selection)&&a.endTag&&(a.endTag=a.endTag.replace(/^\n{0,2}/,"\n\n")));a.selection=this.hooks.postBlockquoteCreation(a.selection);/\n/.test(a.selection)||(a.selection=a.selection.replace(/^(> *)/,function(b,c){a.startTag+=c;return""}))};
t.doCode=function(a,d){var b=/\S[ ]*$/.test(a.before);if(!/^[ ]*\S/.test(a.after)&&!b||/\n/.test(a.selection)){a.before=a.before.replace(/[ ]{4}$/,function(b){a.selection=b+a.selection;return""});var c=b=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&(b=0);/^\n(\t|[ ]{4,})/.test(a.after)&&(c=0);a.skipLines(b,c);a.selection?/^[ ]{0,3}\S/m.test(a.selection)?/\n/.test(a.selection)?a.selection=a.selection.replace(/^/gm,"    "):a.before+="    ":a.selection=a.selection.replace(/^[ ]{4}/gm,""):(a.startTag=
"    ",a.selection="enter code here")}else a.trimWhitespace(),a.findTags(/`/,/`/),a.startTag||a.endTag?a.endTag&&!a.startTag?(a.before+=a.endTag,a.endTag=""):a.startTag=a.endTag="":(a.startTag=a.endTag="`",a.selection||(a.selection="enter code here"))};t.doList=function(a,d,b){d=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/;var c="-",e=1,g=function(){var a;b?(a=" "+e+". ",e++):a=" "+c+" ";return a},f=function(a){void 0===b&&(b=/^\s*\d/.test(a));
return a=a.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(a){return g()})};a.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null);!a.before||(/\n$/.test(a.before)||/^\n/.test(a.startTag))||(a.before+=a.startTag,a.startTag="");if(a.startTag){var h=/\d+[.]/.test(a.startTag);a.startTag="";a.selection=a.selection.replace(/\n[ ]{4}/g,"\n");this.unwrap(a);a.skipLines();h&&(a.after=a.after.replace(d,f));if(b==h)return}var m=1;a.before=a.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,
function(a){/^\s*([*+-])/.test(a)&&(c=q.$1);m=/[^\n]\n\n[^\n]/.test(a)?1:0;return f(a)});a.selection||(a.selection="List item");var h=g(),k=1;a.after=a.after.replace(d,function(a){k=/[^\n]\n\n[^\n]/.test(a)?1:0;return f(a)});a.trimWhitespace(!0);a.skipLines(m,k,!0);a.startTag=h;d=h.replace(/./g," ");this.wrap(a,72-d.length);a.selection=a.selection.replace(/\n/g,"\n"+d)};t.doHeading=function(a,d){a.selection=a.selection.replace(/\s+/g," ");a.selection=a.selection.replace(/(^\s+|\s+$)/g,"");if(a.selection){var b=
0;a.findTags(/#+[ ]*/,/[ ]*#+/);/#+/.test(a.startTag)&&(b=q.lastMatch.length);a.startTag=a.endTag="";a.findTags(null,/\s?(-+|=+)/);/=+/.test(a.endTag)&&(b=1);/-+/.test(a.endTag)&&(b=2);a.startTag=a.endTag="";a.skipLines(1,1);b=0==b?2:b-1;if(0<b){var b=2<=b?"-":"=",c=a.selection.length;72<c&&(c=72);for(a.endTag="\n";c--;)a.endTag+=b}}else a.startTag="## ",a.selection="Heading",a.endTag=" ##"};t.doHorizontalRule=function(a,d){a.startTag="----------\n";a.selection="";a.skipLines(2,1,!0)}})();(function(){function y(h){return h.replace(/<[^>]*>?/gi,E)}function E(h){return h.match(L)||h.match(u)||h.match(G)?h:""}function F(h){if(""==h)return"";var m=/<\/?\w+[^>]*(\s|$|>)/g,r=h.toLowerCase().match(m),g=(r||[]).length;if(0==g)return h;for(var q,w,v,u=[],t=[],a=!1,d=0;d<g;d++)if(q=r[d].replace(/<\/?(\w+).*/,"$1"),!(u[d]||-1<"<p><img><br><li><hr>".search("<"+q+">"))){w=r[d];v=-1;if(!/^<\//.test(w))for(w=d+1;w<g;w++)if(!u[w]&&r[w]=="</"+q+">"){v=w;break}-1==v?a=t[d]=!0:u[v]=!0}if(!a)return h;
d=0;return h=h.replace(m,function(a){a=t[d]?"":a;d++;return a})}var r,m;"object"===typeof exports&&"function"===typeof require?(r=exports,m=require("./Markdown.Converter").Converter):(r=window.Markdown,m=r.Converter);r.getSanitizingConverter=function(){var h=new m;h.hooks.chain("postConversion",y);h.hooks.chain("postConversion",F);return h};var L=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,u=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,
G=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i})();
